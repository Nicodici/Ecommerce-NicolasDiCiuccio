# GuÃ­a completa: ConfiguraciÃ³n de rutas para Live-server y Docker

## ğŸ“‹ Problema original
El proyecto tenÃ­a problemas de rutas que funcionaban en live-server pero no en Docker, o viceversa. El modal no funcionaba correctamente en el contenedor Docker debido a rutas incorrectas.

## âœ… SoluciÃ³n implementada: Rutas absolutas universales

### ğŸ”§ Cambios realizados:

#### 1. **Archivos HTML** (`public/index.html` y `public/carrito.html`)
```html
<!-- ANTES (rutas relativas problemÃ¡ticas) -->
<link rel="stylesheet" href="../assets/css/style.css">
<script type="module" src="../js/modules/main.js"></script>

<!-- DESPUÃ‰S (rutas absolutas) -->
<link rel="stylesheet" href="/assets/css/style.css">
<script type="module" src="/js/modules/main.js"></script>
```

#### 2. **JavaScript** (`js/modules/main.js`)
```javascript
// ANTES (ruta relativa problemÃ¡tica)
import { productosRopa } from "../../data/products.js";

// DESPUÃ‰S (ruta absoluta)
import { productosRopa } from "/data/products.js";
```

#### 3. **Carrito.js** (`js/modules/carrito.js`)
```javascript
// ANTES
<img src="../assets/img/delete.png" alt="Eliminar">

// DESPUÃ‰S
<img src="/assets/img/delete.png" alt="Eliminar">
```

## ğŸ—‚ï¸ Estructura final del proyecto:
```
Ecommerce-NicolasDiCiuccio/
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ index.html (usa /assets/css/style.css, /js/modules/main.js)
â”‚   â””â”€â”€ carrito.html (usa /assets/css/style.css, /js/modules/carrito.js)
â”œâ”€â”€ js/modules/
â”‚   â”œâ”€â”€ main.js (usa /data/products.js)
â”‚   â””â”€â”€ carrito.js (usa /assets/img/delete.png)
â”œâ”€â”€ data/
â”‚   â””â”€â”€ products.js
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ css/style.css
â”‚   â””â”€â”€ img/delete.png
â”œâ”€â”€ server.js (servidor Node.js para desarrollo)
â”œâ”€â”€ package.json (scripts para desarrollo y Docker)
â””â”€â”€ Dockerfile (configuraciÃ³n para producciÃ³n)
```

## ğŸš€ CÃ³mo usar cada entorno:

### ğŸŸ¢ **Desarrollo local con Node.js**
```bash
# Ejecutar servidor de desarrollo
node server.js
# O usando npm
npm run dev

# Acceder en: http://localhost:3000
```

### ğŸ³ **ProducciÃ³n con Docker**
```bash
# Construir imagen
docker build -t ecommerce:nginx .
# O usando npm
npm run docker:build

# Ejecutar contenedor
docker run -d -p 8080:80 --name ecommerce-app ecommerce:nginx
# O usando npm
npm run docker:run

# Acceder en: http://localhost:8080
```

### ğŸ“œ **Scripts de package.json disponibles:**
```json
{
  "scripts": {
    "dev": "node server.js",
    "docker:build": "docker build -t ecommerce:nginx .",
    "docker:run": "docker run -d -p 8080:80 --name ecommerce-app ecommerce:nginx",
    "docker:stop": "docker stop ecommerce-app && docker rm ecommerce-app",
    "docker:restart": "npm run docker:stop && npm run docker:build && npm run docker:run"
  }
}
```

## ğŸ¯ **Por quÃ© funciona esta soluciÃ³n:**

### **En Docker (Nginx):**
- Los archivos se copian a `/usr/share/nginx/html/`
- Las rutas absolutas (`/assets/css/style.css`) se resuelven desde la raÃ­z del servidor
- Estructura: `/usr/share/nginx/html/assets/css/style.css`

### **En desarrollo (Node.js server.js):**
- El servidor maneja las rutas absolutas correctamente
- Sirve archivos desde la raÃ­z del proyecto
- Mapea `/assets/css/style.css` a `./assets/css/style.css`

## âœ… **Beneficios de esta implementaciÃ³n:**

1. **Una sola configuraciÃ³n** para ambos entornos
2. **Rutas absolutas consistentes** sin cambios manuales
3. **Modal funcionando** correctamente en ambos casos
4. **FÃ¡cil desarrollo** con servidor Node.js
5. **ProducciÃ³n optimizada** con Docker + Nginx
6. **Scripts automatizados** para facilitar el workflow

## ğŸ”§ **Comandos Ãºtiles:**

### **GestiÃ³n de Docker:**
```bash
# Ver contenedores corriendo
docker ps

# Detener contenedor
docker stop ecommerce-app

# Eliminar contenedor
docker rm ecommerce-app

# Ver logs del contenedor
docker logs ecommerce-app

# Reiniciar completamente
npm run docker:restart
```

### **Desarrollo:**
```bash
# Iniciar servidor de desarrollo
npm run dev

# El servidor se reinicia automÃ¡ticamente con cambios
# Acceder a http://localhost:3000
```

## ğŸš¨ **Notas importantes:**

1. **Siempre usar rutas absolutas** que empiecen con `/`
2. **No mezclar rutas relativas** (`../`) con absolutas (`/`)
3. **Probar en ambos entornos** antes de hacer commit
4. **El servidor Node.js es solo para desarrollo**, usar Docker para producciÃ³n
5. **Si cambias rutas**, reconstruir la imagen Docker con `npm run docker:restart`

## ğŸ“ **Para recordar:**
- âœ… Rutas absolutas (`/assets/css/style.css`)
- âŒ Rutas relativas (`../assets/css/style.css`)
- ğŸ”„ Un setup, dos entornos
- ğŸ¯ Modal funcionando en ambos casos

---
**Fecha de creaciÃ³n:** 25 de octubre de 2025
**Proyecto:** Ecommerce-NicolasDiCiuccio
**Autor:** Nicodici